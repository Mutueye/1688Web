<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta name="renderer" content="webkit">
        <meta name="description" content="1688双创智慧园区管理系统">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
        <title>1688双创智慧园区管理系统</title>
        <link rel="stylesheet" href="../css/font-awesome.min.css">
        <link rel="stylesheet" href="../css/bootstrap-table.min.css">
        <link rel="stylesheet" href="../css/bootstrap-datetimepicker.min.css">
        <link rel="stylesheet" href="../js/bootstrap-fileinput/css/fileinput.min.css">
        <link rel="stylesheet" href="../js/bootstrap-fileinput/css/theme.min.css">
        <link rel="stylesheet" href="../css/toastr.min.css">
        <link rel="stylesheet" href="../css/index.css">
    </head>
    <body>
        <div class="container-fluid row-space-common">
            <div class="row mt-space">
                <div class="col-xs-12">
                    <div class="page-title">
                         产品展厅留言统计<a class="btn btn-sm btn-theme pull-right" href="chuangye-product.html"><i class="fa fa-undo"></i>&nbsp;返回</a></div>
                </div>
                <div class="col-xs-12">
                    <div class="box-form has-title row-space-10">
                        <div class="box-form-title">查询条件</div>
                        <form class="row no-bottom" id="query_form" name="query_form">
                            <div class="col-xs-12 col-sm-6 col-md-4">
                                <div class="form-group cool-form-group form-group-sm">
                                    <div class="cool-form-label text-right control-label">留言人：</div>
                                    <input class="form-control" type="text">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-6 col-md-4">
                                <div class="form-group cool-form-group form-group-sm">
                                    <div class="cool-form-label text-right control-label">产品：</div>
                                    <input class="form-control" type="text">
                                </div>
                            </div>
                            <div class="col-xs-12 col-sm-6 col-md-4">
                                <div class="form-group cool-form-group form-group-sm">
                                    <div class="cool-form-label text-right control-label">公司：</div>
                                    <input class="form-control" type="text">
                                </div>
                            </div>
                            <div class="col-xs-12">
                                <div class="btn btn-line btn-small"><i class="fa fa-search"></i>&nbsp;查询</div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="col-xs-12">
                    <div class="toolbar" id="toolbar">
                        <div class="btn btn-theme" id="toolbtn_delete"><i class="fa fa-remove"></i>&nbsp;删除记录</div>
                    </div>
                    <table id="table"></table>
                </div>
            </div>
        </div>
        <script src="../js/jquery.min.js"></script>
        <script src="../js/bootstrap.min.js"></script>
        <script src="../js/moment/moment.min.js"></script>
        <script src="../js/moment/zh-cn.js"></script>
        <script src="../js/bootstrap-datetimepicker.min.js"></script>
        <script src="../js/bootstrap-table/bootstrap-table.min.js"></script>
        <script src="../js/bootstrap-table/bootstrap-table-zh-CN.min.js"></script>
        <script src="../js/bootstrap-table/bootstrap-table-export.min.js"></script>
        <script src="../js/tableExport.min.js"></script>
        <script src="../js/bootstrap-fileinput/fileinput.min.js"></script>
        <script src="../js/bootstrap-fileinput/zh.js"></script>
        <script src="../js/bootstrap-fileinput/theme.min.js"></script>
        <script src="../js/toastr.min.js"></script>
        <script src="../js/BSModal.js"></script>
        <script src="../js/common.js"></script>
        <script src="../js/app.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                
                var $btn_delete = $('#toolbtn_delete');
                var $table = $('#table');
                
                $table.bootstrapTable({
                    toolbar : '#toolbar',
                    showColumns : true,
                    showToggle : true,
                    showExport : true,
                    pagination : true,
                    showPaginationSwitch : false,
                    clickToSelect : true,
                    columns: [
                        {
                            field: 'check',
                            checkbox: true,
                            align: 'center',
                            valign: 'middle'
                        },
                        {
                            field: 'id',
                            title: '序号',
                            sortable: true,
                            halign: 'center',
                            align: 'right',
                            width: 30
                        }, 
                        {
                            field: 'commenter',
                            title: '留言人',
                            halign: 'center'
                        },
                        {
                            field: 'comment',
                            title: '对产品的留言',
                            halign: 'center'
                        }, 
                        {
                            field: 'reply',
                            title: '对留言的回复',
                            halign: 'center'
                        }, 
                        {
                            field: 'company',
                            title: '产品企业',
                            halign: 'center'
                        }, 
                        {
                            field: 'product',
                            title: '产品名称',
                            halign: 'center'
                        },
                        {
                            field: 'state',
                            title: '状态',
                            halign: 'center'
                        }, 
                        {
                            field: 'date',
                            title: '时间',
                            halign: 'center',
                            align: 'center'
                        }
                    ],
                    data: [
                        {
                            id : 1,
                            commenter : '王中举',
                            comment : '我的联系方式：13812345678，请联系我',
                            reply : '我们会及时联系的，邮箱e-mail@mail.com',
                            company : '产品企业1',
                            product : '手机',
                            state : '正常',
                            date : '2018-10-23'
                        },
                        {
                            id : 2,
                            commenter : '柳下惠',
                            comment : '我的联系方式：13812345678，请联系我',
                            reply : '我们会及时联系的，邮箱e-mail@mail.com',
                            company : '产品企业2',
                            product : '投影仪',
                            state : '屏蔽',
                            date : '2018-04-19'
                        },
                        {
                            id : 3,
                            commenter : '慕容博',
                            comment : '我的联系方式：13812345678，请联系我',
                            reply : '我们会及时联系的，邮箱e-mail@mail.com',
                            company : '产品企业3',
                            product : '显示器',
                            state : '删除',
                            date : '2018-07-30'
                        }
                    ]
                });
                
                //设置工具栏按钮禁用状态
                setToolBtnDisableState();
                $table.on('check.bs.table uncheck.bs.table check-all.bs.table uncheck-all.bs.table', function () {
                    setToolBtnDisableState();
                });
                
                //删除操作
                $btn_delete.click(function () {
                    //按钮如果不是disabled状态,则可进行操作
                    if(!$(this).attr('disabled')) {
                        //取表格的选中行数据
                        var arrselections = $table.bootstrapTable('getSelections');
                        if (arrselections.length <= 0) {
                            toastr.warning('请选择有效数据');
                            return;
                        }
            
                        BSModal.confirm({ content: "确认要删除选择的数据吗？" }).on(function (e) {
                            if (!e) {
                                return;
                            }
                            //示例：通过ajax删除数据
                            /*
                            $.ajax({
                                type: "post",
                                url: "/api/.../delete",//删除数据的api地址
                                data: { "": JSON.stringify(arrselections) },
                                success: function (data, status) {
                                    if (status == "success") {
                                        toastr.success('删除的数据已提交成功！');
                                        
                                        //此处可以直接刷新表格
                                        $table.bootstrapTable('refresh');
                                        
                                        //或者在前端删除对应选中的数据条目，并重新设置工具栏按钮的disabled状态
                                        var ids = getIdSelections();
                                        $table.bootstrapTable('remove', {
                                            field: 'id',
                                            values: ids
                                        });
                                        setToolBtnDisableState();
                                    }
                                },
                                error: function () {
                                    toastr.error('Error');
                                },
                                complete: function () {
            
                                }
                            });*/
                            
                            //此处仅是前端演示删除后的效果：删除表格条目，重置工具栏状态，显示删除成功的提示
                            var ids = getIdSelections();
                            $table.bootstrapTable('remove', {
                                field: 'id',
                                values: ids
                            });
                            setToolBtnDisableState();
                            toastr.success('删除的数据已提交成功！');
                            
                        });
                    }
                });
                
                function getIdSelections() {
                    return $.map($table.bootstrapTable('getSelections'), function (row) {
                        return row.id
                    });
                }
                
                
                
                function setToolBtnDisableState() {
                    var tableSelections = $table.bootstrapTable('getSelections');
                    $btn_delete.attr('disabled', !tableSelections.length);
                }
                
            });
        </script>
    </body>
</html>